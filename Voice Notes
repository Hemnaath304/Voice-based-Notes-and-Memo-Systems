import speech_recognition as sr
import pyttsx3

# Initialize the text-to-speech engine
engine = pyttsx3.init()

# Function to speak a message
def speak(text):
    engine.say(text)
    engine.runAndWait()

# Function to capture voice input
def listen():
    recognizer = sr.Recognizer()
    with sr.Microphone() as source:
        print("Listening...")
        speak("Please speak your note.")
        recognizer.adjust_for_ambient_noise(source)
        audio = recognizer.listen(source)

    try:
        text = recognizer.recognize_google(audio)
        print("You said:", text)
        return text
    except sr.UnknownValueError:
        print("Sorry, I couldn't understand.")
        speak("Sorry, I couldn't understand.")
        return None
    except sr.RequestError:
        print("There was an issue with the recognition service.")
        speak("There was an issue with the recognition service.")
        return None

# Function to save notes
def save_note(note):
    if note:
        with open("voice_notes.txt", "a") as file:
            file.write(note + "\n")
        speak("Your note has been saved.")
        print("Note saved successfully.")

# Main execution
if __name__ == "__main__":
    speak("Welcome to the Voice-Based Notes System.")
    while True:
        speak("Would you like to create a new note? Say 'yes' or 'exit' to quit.")
        command = listen()
        
        if command and command.lower() == "yes":
            note = listen()
            save_note(note)
        elif command and command.lower() == "exit":
            speak("Goodbye!")
            break
